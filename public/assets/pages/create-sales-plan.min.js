function addInstallmentsRows(num){if(num>0){var row="";for(let index=1;index<num;index++)row+=`\n            <tr id="row_${index}">\n                <th scope="row">${index+1}</th>\n                <td>\n                    <div class="">\n                        <input type="text" id="installment_date_${index}"\n                            name="installments[installments][${index}][date]"\n                            class="form-control" readonly placeholder="YYYY-MM-DD" />\n                    </div>\n                </td>\n                <td>\n                    <div class="position-relative">\n                        <input type="text" class="form-control form-control-lg"\n                            id="installment_detail_${index}" name="installments[installments][${index}][details]"\n                            placeholder="Details" />\n                    </div>\n                </td>\n                <td>\n                    <div class="position-relative">\n                        <input type="number" class="form-control form-control-lg"\n                            id="installment_amount_${index}" name="installments[installments][${index}][amount]"\n                            placeholder="Amount" />\n                    </div>\n                </td>\n                <td>\n                    <div class="position-relative">\n                        <input type="text" class="form-control form-control-lg"\n                            id="installment_remark_${index}" name="installments[installments][${index}][remarks]"\n                            placeholder="Remarks" />\n                    </div>\n                </td>\n            </tr>`;$("#installments_table #dynamic_installment_rows").html(row)}}function installmentsRemoveRow(){$("#installments_table #dynamic_installment_rows tr:last").remove()}function DateRanges(startDate,length=1,monthsCount=1,rangeBy="months"){let endDate=moment(startDate).add((length-1)*monthsCount,rangeBy),range=moment.range(startDate,endDate),years,datesArray;return Array.from(range.by(rangeBy,{step:monthsCount})).map(m=>m.format("YYYY-MM-DD"))}function populateInstallmentTableRows(action=""){showBlockUI("#installments_acard");let data_startDate="2021-12-15",data_length=parseInt($(".touchspin-icon").val()),data_daysCount="quarterly"==$(".custom-option-item-check:checked").val()?90:30,data_rangeBy="days"}window["moment-range"].extendMoment(moment),$(document).ready((function(){var installmentsRowAction="";$(".touchspin-icon").TouchSpin({buttondown_class:"btn btn-primary",buttonup_class:"btn btn-primary",buttondown_txt:feather.icons["chevron-down"].toSvg(),buttonup_txt:feather.icons["chevron-up"].toSvg(),min:1,max:50}).on("touchspin.on.stopupspin",(function(){installmentsRowAction="stopupspin"})).on("touchspin.on.stopdownspin",(function(){installmentsRowAction="stopdownspin"})).on("touchspin.on.stopspin",(function(){var t=$(this);"stopupspin"==installmentsRowAction?addInstallmentsRows(t.val()):"stopdownspin"==installmentsRowAction&&addInstallmentsRows(t.val()),populateInstallmentTableRows(installmentsRowAction),installmentsRowAction=""})).on("change",(function(){var t=$(this);$(".bootstrap-touchspin-up, .bootstrap-touchspin-down").removeClass("disabled-max-min"),1==t.val()&&$(this).siblings().find(".bootstrap-touchspin-down").addClass("disabled-max-min"),50==t.val()&&$(this).siblings().find(".bootstrap-touchspin-up").addClass("disabled-max-min")})),$(".installment_type_radio").on("change",(function(){var ele;switch($(this).val()){case"quarterly":$("#how_many").text("Quaters");break;case"monthly":$("#how_many").text("Months")}populateInstallmentTableRows()})),$(".flatpickr-basic").flatpickr({defaultDate:"today",minDate:"today"}),$("#unit_price").on("change",(function(){let unit_price=parseFloat($(this).val()),unit_size=parseFloat($("#unit_size").val()),unit_price_total=parseFloat(unit_price*unit_size);$("#unit_price_total").val(unit_price_total).trigger("change")})),$("#unit_price_total").on("change",(function(){$(".additional-cost-checkbox").trigger("change")})),$(".additional-cost-checkbox").on("change",(function(){let elementId=$(this).attr("id");elementId=elementId.slice("checkbox-".length);let divElement=$(`#div-${elementId}`),percentageElement=$(`#percentage-${elementId}`),totalPriceElement=$(`#total-price-${elementId}`),percentage=parseFloat(percentageElement.val()),totalPrice=parseFloat(totalPriceElement.val());console.log(percentage,totalPrice),$(this).is(":checked")?$(`#div-${elementId}`).show().childern(`#total-price-${elementId}`).val(0):$(`#div-${elementId}`).hide().childern(`#total-price-${elementId}`).val(0)}))}));